
# Technical Report CA01
Technical report do CA01 no âmbito da UC de COGSI realizado por:

1. David Ferreira - 1240444
2. Rafael Gomes - 1211426
3. Nuno Cunha - 1211689

## Issue 2 - Add veterinarian's Professional Registration Number field
### 1º Passo - Obter a versão mais recente do projeto
Para se obter a ultima versão do projeto utilizou-se o comando ***git pull***, obtendo o seguinte resultado.

    nacunha@cogsi:/mnt/hgfs/Shared/cogsi2526-1240444-1211426-1211689$ git pull
    Already up to date.
    nacunha@cogsi:/mnt/hgfs/Shared/cogsi2526-1240444-1211426-1211689$ 

Obtendo a última versão do projeto, evita-se que alterações feitas na implementação do *use case* tenham conflitos com possíveis alterações já implementadas.

### 2º Passo - Fazer as alterações ao código
Neste *issue*, para se adicionar o campo de ***Professional Registration Number*** foi necessário fazer alterações às seguintes classe:
  1. ***Vet.java*** - Classe do domínio. onde estão estabelecidas regras de negócio e dados referentes aos veterinários    

    @Column(name = "professional_number")
    @NotEmpty
    @Digits(fraction = 0, integer = 10)
    private String professionalNumber;

    public String getProfessionalNumber() {
        return this.professionalNumber;
    }

    public void setProfessionalNumber(String newNumber) {
        this.professionalNumber = newNumber;
    }

Adicionada a coluna à tabela e os devidos métodos *Getter* e *Setter* para o novo atributo. De notar, que estão apenas representadas, neste *Technical Report*, as diferenças implementadas.

  2. ***vetList.jsp*** - tipo de ficheiro usado para construir páginas *Web* em aplicações desenvolvidas em Java.

    <div class="row">
      <table id="vetsTable" class="table table-striped" aria-describedby="veterinarians">
          <thead>
          <tr>
              <th scope="col">Name</th>
              <th scope="col">Professional Registration Number</th>
              <th scope="col">Specialties</th>
          </tr>
          </thead>
          <tbody>
          <c:forEach items="${vets.vetList}" var="vet">
              <tr>
                  <td>
                      <c:out value="${vet.firstName} ${vet.lastName}"/>
                  </td>
                  <td>
                      <c:out value="${vet.professionalNumber}"/>
                  </td>
                  <td>
                      <c:forEach var="specialty" items="${vet.specialties}">
                          <c:out value="${specialty.name} "/>
                      </c:forEach>
                      <c:if test="${vet.nrOfSpecialties == 0}">none</c:if>
                  </td>
              </tr>
          </c:forEach>
          </tbody>
      </table>
    </div>

Adicionada a vizualização dos valores da coluna, na página *web*, entre o nome e as especialidades dos veterinários.

Para além das classes, foi alterada a tabela na base de dados, adicionando o campo para o ***Professional Registration Number*** e adicionados valores aos campos nos dados de teste.

    CREATE TABLE vets (
      id         INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
      first_name VARCHAR(30),
      last_name  VARCHAR(30),
      professional_number VARCHAR(30) 
    );
    CREATE INDEX vets_last_name ON vets (last_name);

Como é possível ver, acima, o campo "*professional_number*" é adicionado e em seguida, podemos ver os dados de teste adicionados a mesma tabela.

    INSERT INTO vets VALUES (default, 'James', 'Carter','1');
    INSERT INTO vets VALUES (default, 'Helen', 'Leary','2');
    INSERT INTO vets VALUES (default, 'Linda', 'Douglas','3');
    INSERT INTO vets VALUES (default, 'Rafael', 'Ortega','4');
    INSERT INTO vets VALUES (default, 'Henry', 'Stevens','5');
    INSERT INTO vets VALUES (default, 'Sharon', 'Jenkins','6');

### 3º Passo - Fazer *commit* das alterações

#### 3.1. Verificar diferenças nos ficheiros

Antes do *commit*, podemos verificar se realmente as mudanças nos ficheiros realmente são visíveis pelo Git, utilizandos os comandos: **git status** para validar os ficheiros alterados e o comando **git diff** para verificar as mudanças efetuadas em cada ficheiro.

*Output* do comando **git status**:

    nacunha@cogsi:/mnt/hgfs/Shared/cogsi2526-1240444-1211426-1211689$ git status
    On branch main
    Your branch is up to date with 'origin/main'.

    Changes not staged for commit:
      (use "git add <file>..." to update what will be committed)
      (use "git restore <file>..." to discard changes in working directory)
            modified:   CA1/spring-framework-petclinic/readme.md
            modified:   CA1/spring-framework-petclinic/src/main/java/org/springframework/samples/petclinic/model/Vet.java
            modified:   CA1/spring-framework-petclinic/src/main/resources/db/h2/data.sql
            modified:   CA1/spring-framework-petclinic/src/main/resources/db/h2/schema.sql
            modified:   CA1/spring-framework-petclinic/src/main/webapp/WEB-INF/jsp/vets/vetList.jsp

    no changes added to commit (use "git add" and/or "git commit -a")
    nacunha@cogsi:/mnt/hgfs/Shared/cogsi2526-1240444-1211426-1211689$

Excerto do *output* do comando **git diff**:

    diff --git a/CA1/spring-framework-petclinic/src/main/resources/db/h2/data.sql b/CA1/spring-framework-petclinic/src/main/resources/db/h2/data.sql
    index f232b13..0f23e2e 100644
    --- a/CA1/spring-framework-petclinic/src/main/resources/db/h2/data.sql
    +++ b/CA1/spring-framework-petclinic/src/main/resources/db/h2/data.sql
    @@ -1,9 +1,9 @@
    -INSERT INTO vets VALUES (default, 'James', 'Carter');
    -INSERT INTO vets VALUES (default, 'Helen', 'Leary');
    -INSERT INTO vets VALUES (default, 'Linda', 'Douglas');
    -INSERT INTO vets VALUES (default, 'Rafael', 'Ortega');
    -INSERT INTO vets VALUES (default, 'Henry', 'Stevens');
    -INSERT INTO vets VALUES (default, 'Sharon', 'Jenkins');
    +INSERT INTO vets VALUES (default, 'James', 'Carter','1');
    +INSERT INTO vets VALUES (default, 'Helen', 'Leary','2');
    +INSERT INTO vets VALUES (default, 'Linda', 'Douglas','3');
    +INSERT INTO vets VALUES (default, 'Rafael', 'Ortega','4');
    +INSERT INTO vets VALUES (default, 'Henry', 'Stevens','5');
    +INSERT INTO vets VALUES (default, 'Sharon', 'Jenkins','6');
 

#### 3.2.  Fazer **staging** das alterações

Utilizando o comando **git commit -A** fazemos *staging* de todos os ficheiros alterados. Podemos ver o efeito do comando correndo novamente o comando **git status**.

    nacunha@cogsi:/mnt/hgfs/Shared/cogsi2526-1240444-1211426-1211689$ git status
    On branch main
    Your branch is up to date with 'origin/main'.

    Changes to be committed:
      (use "git restore --staged <file>..." to unstage)
            modified:   CA1/spring-framework-petclinic/readme.md
            modified:   CA1/spring-framework-petclinic/src/main/java/org/springframework/samples/petclinic/model/Vet.java
            modified:   CA1/spring-framework-petclinic/src/main/resources/db/h2/data.sql
            modified:   CA1/spring-framework-petclinic/src/main/resources/db/h2/schema.sql
            modified:   CA1/spring-framework-petclinic/src/main/webapp/WEB-INF/jsp/vets/vetList.jsp

    nacunha@cogsi:/mnt/hgfs/Shared/cogsi2526-1240444-1211426-1211689$ 

Pode-se observar que os ficheiros que, anteriormente, foram alterados estão *staged* e prontos para *commit*.

#### 3.2. Fazer **commit** das alterações

Para se fazer o *commit* das alterações utiliza-se comando **git commit**. Adicionalmente, foi utilizada a *flag* **-m** para que uma mensagem informativa seja adicionada.

    nacunha@cogsi:/mnt/hgfs/Shared/cogsi2526-1240444-1211426-1211689$ git commit -m "Issue 2: Implementação feita e dados de teste adicionados"
    [main aae60b1] Issue 2: Implementação feita e dados de teste adicionados
     5 files changed, 37 insertions(+), 242 deletions(-)
    nacunha@cogsi:/mnt/hgfs/Shared/cogsi2526-1240444-1211426-1211689$ 

Dado que estamos a trabalhar com um repositório remoto é necessário correr o comando **git push origin main** para enviar a versão com as alterações feitas.

    nacunha@cogsi:/mnt/hgfs/Shared/cogsi2526-1240444-1211426-1211689$ git push origin main
    Enumerating objects: 47, done.
    Counting objects: 100% (47/47), done.
    Delta compression using up to 2 threads
    Compressing objects: 100% (19/19), done.
    Writing objects: 100% (24/24), 2.23 KiB | 127.00 KiB/s, done.
    Total 24 (delta 9), reused 0 (delta 0), pack-reused 0
    remote: Resolving deltas: 100% (9/9), completed with 9 local objects.
    To github.com:davidsferreira02/cogsi2526-1240444-1211426-1211689.git
       eeef565..aae60b1  main -> main

### 4º Passo - Verificações

Para verificar as mudanças é necessário correr o comando **./mvnw -DskipTests jetty:run-war** e, de seguida, aceder à pagina *web* e verificar se na aba dos veterinários as mudanças são visíveis.

![Validação da implementação](/CA1/spring-framework-petclinic/img/licenseNumberFeature/Issue2ValidacaoImplementacao.png "Issue 2")

Como podemos ver, o campo foi adicionado com sucesso à tabela dos veterinários.

## Issue 7 - Count distinct contributors in the repository 

É possível observar-se os diferentes contribuintes do projeto através da utilização dos comandos ***git log*** e ***git shortlog***. De forma a informação ser moldada às possíveis necessidades pode-se utilizar as *flags* associadas.

De forma a perceber apenas os diferentes contribuintes e o número de *commits* de cada um o comando mais indicado é o ***git shortlog***, pois oferece um *output* mais resumido e de mais fácil leitura.
        
        nacunha@cogsi:/mnt/hgfs/Shared/cogsi2526-1240444-1211426-1211689/CA1$ git shortlog
        David Ferreira (3):
              Testing the new feature #3
              Remove .vscode dir
              Git log command #4

        NunoCunha43 (2):
              Issue 2: Implementação feita e dados de teste adicionados
              Issue 2: readme section correction

        Rafael Gomes (2):
              Added nif support
              Added spring-framework-petclinic to CA1 folder. References #1

Como se pode observar o *output* mostra-nos os diferentes contribuintes através dos seus *usernames* e o número de *commits* de cada. Para além disso, podemos observar também as mensagens referentes a cada *commit*, caso existam.

Se o objetivo for ter um *output* mais pormenorizado, o comando ***git log*** é mais útil, podemos ainda utilizar a *flag* ***--graph*** de forma a termos o *output* mostrado num gráfico para mais fácil visualização.

        nacunha@cogsi:/mnt/hgfs/Shared/cogsi2526-1240444-1211426-1211689/CA1$ git log --graph
        * commit 5fd878521fd7cc392d10e6befaba0063e5492cb4 (HEAD -> main, origin/main, origin/HEAD)
        | Author: David Ferreira <davidsferreira02@gmail.com>
        | Date:   Sat Sep 27 22:00:51 2025 +0100
        | 
        |     Git log command #4
        | 
        * commit 13936471382495988eac32344324027ad29bc3ad (tag: 1.2.0)
        | Author: David Ferreira <davidsferreira02@gmail.com>
        | Date:   Sat Sep 27 21:53:01 2025 +0100
        | 
        |     Remove .vscode dir
        | 
        * commit 10a46164a3c6345fc55836f628f242fc12a69f5f
        | Author: David Ferreira <davidsferreira02@gmail.com>
        | Date:   Sat Sep 27 21:49:55 2025 +0100
        | 
        |     Testing the new feature #3
        | 
        * commit bff25d2ad30abb8c78fbd3e31d46eaf749486b3d
        | Author: NunoCunha43 <1211689@isep.ipp.pt>
        | Date:   Sat Sep 27 19:28:42 2025 +0000
        | 
        |     Issue 2: readme section correction
        | 
        * commit aae60b14116863557cbad86f6ac5be578d29a991
        | Author: NunoCunha43 <1211689@isep.ipp.pt>
        | Date:   Sat Sep 27 18:07:36 2025 +0000
        | 
        |     Issue 2: Implementação feita e dados de teste adicionados
        | 
        * commit eeef565f4d4023919cd5dabd0359db547cd0e01f (tag: v1.1.0)
        | Author: Rafael Gomes <1211426@isep.ipp.pt>
        | Date:   Wed Sep 24 22:12:14 2025 +0100
        | 
        |     Added spring-framework-petclinic to CA1 folder. References #1
        | 
        * commit 8ea570ab89262c49561e3ef3a3ea05fb641eb427
          Author: Rafael Gomes <1211426@isep.ipp.pt>
          Date:   Wed Sep 17 22:59:37 2025 +0100

              Added nif support

Analisando o *output* deste comando podemos vizualizar o *hash* que identifica os commits, o autor, a data, mensagens e *tags* dos *commits* oferecendo mais informação quando comparado com o ***git shortlog***.

Em suma, aquando da escrita desta secção do *Technical Report*, existem 3 contribuintes diferentes que realizaram um total de 7 *commits*

## Issue 11 - Create and Solve Merge conflicts

Para ser possível verificar-se *merge conflicts* no repositório e prontamente corrigi-los foi necessário criar-se este tipo de conflitos de forma controlado.

### 1º Passo - Realizar um *commit* no novo *branch*

Para a realização deste passo, foi criado um *branch* temporário, seguindo o processo já documentado neste documento, apenas com a intenção da criar *merge conflicts*. Foi, então, adicionada a seguinte linha no ficheiro *readme.md*.

        # TEXTO DE TESTE PARA ISSUE DE MERGE CONFLICT.

De seguida, foi feito o *commit* desta alteração para o *branch* criado, como mostra o seguinte *output*:

        nacunha@cogsi:/mnt/hgfs/Shared/cogsi2526-1240444-1211426-1211689/CA1$ git log
        commit aea38a6c5a74c3a99fc273e46e4303ea0626d21f (HEAD -> conflict_issue, origin/conflict_issue)
        Author: NunoCunha43 <1211689@isep.ipp.pt>
        Date:   Fri Oct 3 17:08:05 2025 +0000

            #12 - criacao de conflito

Para confirmar que o realmente este *branch* se encontra com mais commits que o *main* podemos recorrer ao comando ***git status***:



### 2º Passo - Realizar um *commit* conflituoso no *branch main*

Posto isto, foram feitas alterações ao ficheiro *readme.md* no *main branch* e enviadas para o repositório remoto, para que este sirva de teste.
        
        nacunha@cogsi:/mnt/hgfs/Shared/cogsi2526-1240444-1211426-1211689/CA1$ git add -A
        nacunha@cogsi:/mnt/hgfs/Shared/cogsi2526-1240444-1211426-1211689/CA1$ git commit -m "#12 - Issue 12 - Error fix"
        [main 8f5a3b0] #12 - Issue 12 - Error fix
         1 file changed, 21 insertions(+), 1 deletion(-)
        nacunha@cogsi:/mnt/hgfs/Shared/cogsi2526-1240444-1211426-1211689/CA1$ git push origin main 
        Enumerating objects: 9, done.
        Counting objects: 100% (9/9), done.
        Delta compression using up to 2 threads
        Compressing objects: 100% (5/5), done.
        Writing objects: 100% (5/5), 959 bytes | 137.00 KiB/s, done.
        Total 5 (delta 2), reused 0 (delta 0), pack-reused 0
        remote: Resolving deltas: 100% (2/2), completed with 2 local objects.
        To github.com:davidsferreira02/cogsi2526-1240444-1211426-1211689.git
           ff3185b..8f5a3b0  main -> main
        nacunha@cogsi:/mnt/hgfs/Shared/cogsi2526-1240444-1211426-1211689/CA1$ 
        
De seguida,

## Issue 12 - Aditional Technologies

### Mercurial

A primeira tecnologia alternativa ao *Git* encontrada é o ***Mercurial***, a filosofia de ambos difere em alguns pontos. Como podemos ler no artigo de *Nelson Alfonso* de setembro de 2024, da revista *Medium*, [a filosofia do *git* oferece mais flexibilidade e poder, mesmo que a curva de aprendizagem seja mais íngrime, enquanto que a do *Mercurial* baseia-se na fácil e simples utilização](https://medium.com/@Nelsonalfonso/git-vs-mercurial-the-battle-of-distributed-version-control-titans-79ffbf3d67d7).

#### Criação do repositório

Em primeiro lugar, é necessário instalar o ***Mercurial*** através do comando ***sudo apt install mercurial*** e, de seguida, definir o *username* que pretendemos usar, editando o ficheiro */.hgrc*. 